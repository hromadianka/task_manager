{% extends "base.html" %}

{% block content %}
<div class="container py-4">

    <div class="card mb-4 border-0 shadow-sm">
        <div class="card-body d-flex justify-content-between align-items-center"
             style="background-color: #0d6efd; color: white; border-radius: 8px;">

            {% include "projects/partials/project_title.html" %}

            <div class="d-flex gap-2">

                <!-- Edit -->
                <button
                    class="icon-btn"
                    hx-get="{% url 'projects:update' project.id %}"
                    hx-target="#project-title"
                    hx-swap="outerHTML"
                >
                    <i class="bi bi-pencil text-white"></i>
                </button>

                <!-- Delete -->
                <form
                    hx-post="{% url 'projects:delete' project.id %}"
                    hx-confirm="Delete this project?"
                    hx-on="htmx:afterRequest: window.location.href='/projects/'"
                    style="display:inline;"
                >
                    {% csrf_token %}
                    <button type="submit" class="icon-btn">
                        <i class="bi bi-trash text-white"></i>
                    </button>
                </form>
    </div>
        </div>
    </div>

    {% include "tasks/partials/task_form.html" %}

    <div id="tasks-list">
        {% for task in project.tasks.all %}
            {% include "tasks/partials/task_item.html" %}
        {% endfor %}
    </div>

</div>

<style>
    .task-item {
        position: relative;
    }

    .calendar-btn {
        display: none;
        background: none;
        border: none;
        cursor: pointer;
    }

    .task-actions {
        opacity: 0;
        transition: opacity 0.2s;
    }

    .task-item:hover .calendar-btn,
    .task-item:hover .task-actions {
        display: inline-block;
        opacity: 1;
    }
</style>
{% endblock %}